---

machine:
  python:
    version: 2.7.6

dependencies:
  pre:
    - cd ~ && wget http://www.vtk.org/files/release/5.10/vtk-5.10.1.tar.gz
    - cd ~ && tar -xvf ~/vtk-5.10.1.tar.gz
    - cd ~/VTK5.10.1/ && cmake -D VTK_WRAP_PYTHON:BOOL=ON -D BUILD_SHARED_LIBS:BOOL=ON ./
    - cd ~/VTK5.10.1/ && make all
    - pip install -r requirements.txt

  post:
    - cp ~/VTK5.10.1/bin/vtkpython ~/virtualenvs/venv-2.7.6/bin/python

  cache_directories:
    - ~/VTK5.10.1

test:
  override:
    - py.test $HOME/chagu/test/:
        environment:
          PYTHONPATH: "$PYTHONPATH:$HOME/chagu"